{
  "version": 3,
  "sources": ["../../three/examples/jsm/environments/RoomEnvironment.js"],
  "sourcesContent": ["import {\r\n \tBackSide,\r\n \tBoxGeometry,\r\n \tInstancedMesh,\r\n \tMesh,\r\n\tMeshLambertMaterial,\r\n \tMeshStandardMaterial,\r\n \tPointLight,\r\n \tScene,\r\n \tObject3D,\r\n} from 'three';\r\n\r\n/**\r\n * This class represents a scene with a basic room setup that can be used as\r\n * input for {@link PMREMGenerator#fromScene}. The resulting PMREM represents the room's\r\n * lighting and can be used for Image Based Lighting by assigning it to {@link Scene#environment}\r\n * or directly as an environment map to PBR materials.\r\n *\r\n * The implementation is based on the [EnvironmentScene](https://github.com/google/model-viewer/blob/master/packages/model-viewer/src/three-components/EnvironmentScene.ts)\r\n * component from the `model-viewer` project.\r\n *\r\n * ```js\r\n * const environment = new RoomEnvironment();\r\n * const pmremGenerator = new THREE.PMREMGenerator( renderer );\r\n *\r\n * const envMap = pmremGenerator.fromScene( environment ).texture;\r\n * scene.environment = envMap;\r\n * ```\r\n *\r\n * @augments Scene\r\n * @three_import import { RoomEnvironment } from 'three/addons/environments/RoomEnvironment.js';\r\n */\r\nclass RoomEnvironment extends Scene {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper();\r\n\r\n\t\tconst geometry = new BoxGeometry();\r\n\t\tgeometry.deleteAttribute( 'uv' );\r\n\r\n\t\tconst roomMaterial = new MeshStandardMaterial( { side: BackSide } );\r\n\t\tconst boxMaterial = new MeshStandardMaterial();\r\n\r\n\t\tconst mainLight = new PointLight( 0xffffff, 900, 28, 2 );\r\n\t\tmainLight.position.set( 0.418, 16.199, 0.300 );\r\n\t\tthis.add( mainLight );\r\n\r\n\t\tconst room = new Mesh( geometry, roomMaterial );\r\n\t\troom.position.set( - 0.757, 13.219, 0.717 );\r\n\t\troom.scale.set( 31.713, 28.305, 28.591 );\r\n\t\tthis.add( room );\r\n\r\n\t\tconst boxes = new InstancedMesh( geometry, boxMaterial, 6 );\r\n\t\tconst transform = new Object3D();\r\n\r\n\t\t// box1\r\n\t\ttransform.position.set( - 10.906, 2.009, 1.846 );\r\n\t\ttransform.rotation.set( 0, - 0.195, 0 );\r\n\t\ttransform.scale.set( 2.328, 7.905, 4.651 );\r\n\t\ttransform.updateMatrix();\r\n\t\tboxes.setMatrixAt( 0, transform.matrix );\r\n\r\n\t\t// box2\r\n\t\ttransform.position.set( - 5.607, - 0.754, - 0.758 );\r\n\t\ttransform.rotation.set( 0, 0.994, 0 );\r\n\t\ttransform.scale.set( 1.970, 1.534, 3.955 );\r\n\t\ttransform.updateMatrix();\r\n\t\tboxes.setMatrixAt( 1, transform.matrix );\r\n\r\n\t\t// box3\r\n\t\ttransform.position.set( 6.167, 0.857, 7.803 );\r\n\t\ttransform.rotation.set( 0, 0.561, 0 );\r\n\t\ttransform.scale.set( 3.927, 6.285, 3.687 );\r\n\t\ttransform.updateMatrix();\r\n\t\tboxes.setMatrixAt( 2, transform.matrix );\r\n\r\n\t\t// box4\r\n\t\ttransform.position.set( - 2.017, 0.018, 6.124 );\r\n\t\ttransform.rotation.set( 0, 0.333, 0 );\r\n\t\ttransform.scale.set( 2.002, 4.566, 2.064 );\r\n\t\ttransform.updateMatrix();\r\n\t\tboxes.setMatrixAt( 3, transform.matrix );\r\n\r\n\t\t// box5\r\n\t\ttransform.position.set( 2.291, - 0.756, - 2.621 );\r\n\t\ttransform.rotation.set( 0, - 0.286, 0 );\r\n\t\ttransform.scale.set( 1.546, 1.552, 1.496 );\r\n\t\ttransform.updateMatrix();\r\n\t\tboxes.setMatrixAt( 4, transform.matrix );\r\n\r\n\t\t// box6\r\n\t\ttransform.position.set( - 2.193, - 0.369, - 5.547 );\r\n\t\ttransform.rotation.set( 0, 0.516, 0 );\r\n\t\ttransform.scale.set( 3.875, 3.487, 2.986 );\r\n\t\ttransform.updateMatrix();\r\n\t\tboxes.setMatrixAt( 5, transform.matrix );\r\n\r\n\t\tthis.add( boxes );\r\n\r\n\r\n\t\t// -x right\r\n\t\tconst light1 = new Mesh( geometry, createAreaLightMaterial( 50 ) );\r\n\t\tlight1.position.set( - 16.116, 14.37, 8.208 );\r\n\t\tlight1.scale.set( 0.1, 2.428, 2.739 );\r\n\t\tthis.add( light1 );\r\n\r\n\t\t// -x left\r\n\t\tconst light2 = new Mesh( geometry, createAreaLightMaterial( 50 ) );\r\n\t\tlight2.position.set( - 16.109, 18.021, - 8.207 );\r\n\t\tlight2.scale.set( 0.1, 2.425, 2.751 );\r\n\t\tthis.add( light2 );\r\n\r\n\t\t// +x\r\n\t\tconst light3 = new Mesh( geometry, createAreaLightMaterial( 17 ) );\r\n\t\tlight3.position.set( 14.904, 12.198, - 1.832 );\r\n\t\tlight3.scale.set( 0.15, 4.265, 6.331 );\r\n\t\tthis.add( light3 );\r\n\r\n\t\t// +z\r\n\t\tconst light4 = new Mesh( geometry, createAreaLightMaterial( 43 ) );\r\n\t\tlight4.position.set( - 0.462, 8.89, 14.520 );\r\n\t\tlight4.scale.set( 4.38, 5.441, 0.088 );\r\n\t\tthis.add( light4 );\r\n\r\n\t\t// -z\r\n\t\tconst light5 = new Mesh( geometry, createAreaLightMaterial( 20 ) );\r\n\t\tlight5.position.set( 3.235, 11.486, - 12.541 );\r\n\t\tlight5.scale.set( 2.5, 2.0, 0.1 );\r\n\t\tthis.add( light5 );\r\n\r\n\t\t// +y\r\n\t\tconst light6 = new Mesh( geometry, createAreaLightMaterial( 100 ) );\r\n\t\tlight6.position.set( 0.0, 20.0, 0.0 );\r\n\t\tlight6.scale.set( 1.0, 0.1, 1.0 );\r\n\t\tthis.add( light6 );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Frees internal resources. This method should be called\r\n\t * when the environment is no longer required.\r\n\t */\r\n\tdispose() {\r\n\r\n\t\tconst resources = new Set();\r\n\r\n\t\tthis.traverse( ( object ) => {\r\n\r\n\t\t\tif ( object.isMesh ) {\r\n\r\n\t\t\t\tresources.add( object.geometry );\r\n\t\t\t\tresources.add( object.material );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tfor ( const resource of resources ) {\r\n\r\n\t\t\tresource.dispose();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction createAreaLightMaterial( intensity ) {\r\n\r\n\t// create an emissive-only material. see #31348\r\n\tconst material = new MeshLambertMaterial( {\r\n\t\tcolor: 0x000000,\r\n\t\temissive: 0xffffff,\r\n\t\temissiveIntensity: intensity\r\n\t} );\r\n\r\n\treturn material;\r\n\r\n}\r\n\r\nexport { RoomEnvironment };\r\n"],
  "mappings": "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",
  "names": []
}
