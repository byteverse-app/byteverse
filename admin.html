<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ByteVerse Waitlist Admin</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="admin-root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function WaitlistAdmin() {
            const [waitlistEntries, setWaitlistEntries] = useState([]);
            const [isLoading, setIsLoading] = useState(false);
            const [selectedEntries, setSelectedEntries] = useState([]);
            const [accessMessage, setAccessMessage] = useState('');
            const [isSendingAccess, setIsSendingAccess] = useState(false);

            // Mock data for demonstration
            const mockWaitlistData = [
                {
                    id: 1,
                    email: 'john@example.com',
                    name: 'John Doe',
                    company: 'Tech Corp',
                    signupDate: '2024-01-15',
                    status: 'waiting',
                    accessGranted: false
                },
                {
                    id: 2,
                    email: 'jane@startup.io',
                    name: 'Jane Smith',
                    company: 'Startup Inc',
                    signupDate: '2024-01-16',
                    status: 'waiting',
                    accessGranted: false
                },
                {
                    id: 3,
                    email: 'mike@university.edu',
                    name: 'Mike Johnson',
                    company: 'University',
                    signupDate: '2024-01-17',
                    status: 'waiting',
                    accessGranted: false
                }
            ];

            useEffect(() => {
                setWaitlistEntries(mockWaitlistData);
            }, []);

            const handleSelectEntry = (entryId) => {
                setSelectedEntries(prev => 
                    prev.includes(entryId) 
                        ? prev.filter(id => id !== entryId)
                        : [...prev, entryId]
                );
            };

            const handleSelectAll = () => {
                if (selectedEntries.length === waitlistEntries.length) {
                    setSelectedEntries([]);
                } else {
                    setSelectedEntries(waitlistEntries.map(entry => entry.id));
                }
            };

            const handleGrantAccess = async () => {
                if (selectedEntries.length === 0) return;

                setIsSendingAccess(true);
                
                try {
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    setWaitlistEntries(prev => 
                        prev.map(entry => 
                            selectedEntries.includes(entry.id) 
                                ? { ...entry, status: 'access_granted', accessGranted: true }
                                : entry
                        )
                    );
                    
                    setSelectedEntries([]);
                    setAccessMessage('');
                    
                    alert(`Access granted to ${selectedEntries.length} user(s)! They will receive notification emails.`);
                } catch (error) {
                    console.error('Error granting access:', error);
                    alert('Error granting access. Please try again.');
                } finally {
                    setIsSendingAccess(false);
                }
            };

            const handleSendBulkMessage = async () => {
                if (selectedEntries.length === 0 || !accessMessage.trim()) return;

                setIsSendingAccess(true);
                
                try {
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    alert(`Message sent to ${selectedEntries.length} user(s)!`);
                    setAccessMessage('');
                } catch (error) {
                    console.error('Error sending message:', error);
                    alert('Error sending message. Please try again.');
                } finally {
                    setIsSendingAccess(false);
                }
            };

            const getStatusBadge = (status) => {
                const badges = {
                    waiting: 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',
                    access_granted: 'bg-green-500/20 text-green-400 border-green-500/30',
                    notified: 'bg-blue-500/20 text-blue-400 border-blue-500/30'
                };
                
                return React.createElement('span', {
                    className: `px-2 py-1 rounded-full text-xs font-medium border ${badges[status] || badges.waiting}`
                }, status.replace('_', ' ').toUpperCase());
            };

            return React.createElement('div', { className: 'min-h-screen bg-gray-900 text-white p-8' },
                React.createElement('div', { className: 'max-w-6xl mx-auto' },
                    React.createElement('div', { className: 'mb-8' },
                        React.createElement('h1', { className: 'text-3xl font-bold mb-2' }, 'ByteVerse Waitlist Admin'),
                        React.createElement('p', { className: 'text-gray-400' }, 'Manage waitlist entries and grant access to users')
                    ),

                    // Stats
                    React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6 mb-8' },
                        React.createElement('div', { className: 'bg-gray-800 p-6 rounded-xl' },
                            React.createElement('h3', { className: 'text-lg font-semibold mb-2' }, 'Total Signups'),
                            React.createElement('p', { className: 'text-3xl font-bold text-blue-400' }, waitlistEntries.length)
                        ),
                        React.createElement('div', { className: 'bg-gray-800 p-6 rounded-xl' },
                            React.createElement('h3', { className: 'text-lg font-semibold mb-2' }, 'Waiting'),
                            React.createElement('p', { className: 'text-3xl font-bold text-yellow-400' },
                                waitlistEntries.filter(entry => entry.status === 'waiting').length)
                        ),
                        React.createElement('div', { className: 'bg-gray-800 p-6 rounded-xl' },
                            React.createElement('h3', { className: 'text-lg font-semibold mb-2' }, 'Access Granted'),
                            React.createElement('p', { className: 'text-3xl font-bold text-green-400' },
                                waitlistEntries.filter(entry => entry.accessGranted).length)
                        )
                    ),

                    // Bulk Actions
                    selectedEntries.length > 0 && React.createElement('div', { className: 'bg-gray-800 p-6 rounded-xl mb-8' },
                        React.createElement('h3', { className: 'text-lg font-semibold mb-4' },
                            `Bulk Actions (${selectedEntries.length} selected)`
                        ),
                        React.createElement('div', { className: 'flex flex-col md:flex-row gap-4' },
                            React.createElement('button', {
                                onClick: handleGrantAccess,
                                disabled: isSendingAccess,
                                className: 'px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed'
                            }, isSendingAccess ? 'Granting...' : 'Grant Access'),
                            
                            React.createElement('div', { className: 'flex-1 flex gap-2' },
                                React.createElement('input', {
                                    type: 'text',
                                    value: accessMessage,
                                    onChange: (e) => setAccessMessage(e.target.value),
                                    placeholder: 'Send a message to selected users...',
                                    className: 'flex-1 px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-blue-500'
                                }),
                                React.createElement('button', {
                                    onClick: handleSendBulkMessage,
                                    disabled: isSendingAccess || !accessMessage.trim(),
                                    className: 'px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed'
                                }, 'Send Message')
                            )
                        )
                    ),

                    // Waitlist Table
                    React.createElement('div', { className: 'bg-gray-800 rounded-xl overflow-hidden' },
                        React.createElement('div', { className: 'p-6 border-b border-gray-700' },
                            React.createElement('div', { className: 'flex items-center justify-between' },
                                React.createElement('h3', { className: 'text-xl font-semibold' }, 'Waitlist Entries'),
                                React.createElement('div', { className: 'flex items-center gap-4' },
                                    React.createElement('button', {
                                        onClick: handleSelectAll,
                                        className: 'text-sm text-blue-400 hover:text-blue-300 transition'
                                    }, selectedEntries.length === waitlistEntries.length ? 'Deselect All' : 'Select All'),
                                    React.createElement('span', { className: 'text-sm text-gray-400' },
                                        `${selectedEntries.length} selected`)
                                )
                            )
                        ),

                        React.createElement('div', { className: 'overflow-x-auto' },
                            React.createElement('table', { className: 'w-full' },
                                React.createElement('thead', { className: 'bg-gray-700' },
                                    React.createElement('tr', {},
                                        React.createElement('th', { className: 'px-6 py-4 text-left' },
                                            React.createElement('input', {
                                                type: 'checkbox',
                                                checked: selectedEntries.length === waitlistEntries.length && waitlistEntries.length > 0,
                                                onChange: handleSelectAll,
                                                className: 'rounded border-gray-600 bg-gray-800'
                                            })
                                        ),
                                        React.createElement('th', { className: 'px-6 py-4 text-left text-sm font-medium text-gray-300' }, 'Email'),
                                        React.createElement('th', { className: 'px-6 py-4 text-left text-sm font-medium text-gray-300' }, 'Name'),
                                        React.createElement('th', { className: 'px-6 py-4 text-left text-sm font-medium text-gray-300' }, 'Company'),
                                        React.createElement('th', { className: 'px-6 py-4 text-left text-sm font-medium text-gray-300' }, 'Signup Date'),
                                        React.createElement('th', { className: 'px-6 py-4 text-left text-sm font-medium text-gray-300' }, 'Status'),
                                        React.createElement('th', { className: 'px-6 py-4 text-left text-sm font-medium text-gray-300' }, 'Actions')
                                    )
                                ),
                                React.createElement('tbody', { className: 'divide-y divide-gray-700' },
                                    waitlistEntries.map((entry) => 
                                        React.createElement('tr', { key: entry.id, className: 'hover:bg-gray-700/50 transition' },
                                            React.createElement('td', { className: 'px-6 py-4' },
                                                React.createElement('input', {
                                                    type: 'checkbox',
                                                    checked: selectedEntries.includes(entry.id),
                                                    onChange: () => handleSelectEntry(entry.id),
                                                    className: 'rounded border-gray-600 bg-gray-800'
                                                })
                                            ),
                                            React.createElement('td', { className: 'px-6 py-4' },
                                                React.createElement('div', { className: 'text-sm font-medium' }, entry.email)
                                            ),
                                            React.createElement('td', { className: 'px-6 py-4' },
                                                React.createElement('div', { className: 'text-sm text-gray-300' }, entry.name)
                                            ),
                                            React.createElement('td', { className: 'px-6 py-4' },
                                                React.createElement('div', { className: 'text-sm text-gray-300' }, entry.company)
                                            ),
                                            React.createElement('td', { className: 'px-6 py-4' },
                                                React.createElement('div', { className: 'text-sm text-gray-300' }, entry.signupDate)
                                            ),
                                            React.createElement('td', { className: 'px-6 py-4' },
                                                getStatusBadge(entry.status)
                                            ),
                                            React.createElement('td', { className: 'px-6 py-4' },
                                                React.createElement('div', { className: 'flex gap-2' },
                                                    !entry.accessGranted && React.createElement('button', {
                                                        onClick: () => {
                                                            setSelectedEntries([entry.id]);
                                                            handleGrantAccess();
                                                        },
                                                        className: 'px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-xs font-medium transition'
                                                    }, 'Grant Access'),
                                                    React.createElement('button', {
                                                        className: 'px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-xs font-medium transition'
                                                    }, 'Message')
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    ),

                    // Instructions
                    React.createElement('div', { className: 'mt-8 bg-blue-900/20 border border-blue-500/30 rounded-xl p-6' },
                        React.createElement('h3', { className: 'text-lg font-semibold mb-4 text-blue-400' }, 'How to Use This Admin Panel'),
                        React.createElement('div', { className: 'space-y-2 text-sm text-gray-300' },
                            React.createElement('p', {}, '• Select users by checking the boxes next to their names'),
                            React.createElement('p', {}, '• Grant Access to selected users - they\'ll receive an email notification'),
                            React.createElement('p', {}, '• Send Messages to communicate with users before granting access'),
                            React.createElement('p', {}, '• Track Status to see who has been granted access'),
                            React.createElement('p', { className: 'mt-4 text-blue-300' },
                                React.createElement('strong', {}, 'Note: '),
                                'This is a demo interface. In production, you\'ll need to connect this to your backend API and email service.'
                            )
                        )
                    )
                )
            );
        }

        ReactDOM.render(React.createElement(WaitlistAdmin), document.getElementById('admin-root'));
    </script>
</body>
</html>
